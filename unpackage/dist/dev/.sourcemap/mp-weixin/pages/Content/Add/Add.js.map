{"version":3,"sources":["webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?7801","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?868e","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?f8fb","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?7720","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?b723","webpack:///C:/Users/xch752/Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue?7b26"],"names":["components","uniNavBar","hFormAlert","data","objectId","token","bodyValue","imgList","imgListUrl","geolocation","videoSrc","videoSrcUrl","tag","tagAddShow","partArray","index","onLoad","loadUserData","initQiniu","initPartArray","methods","uni","getStorageSync","reLaunch","url","success","showToast","title","duration","icon","e","console","log","navBack","navigateBack","delta","query","Bmob","Query","find","then","res","addTag","tagName","push","bindPickerChange","target","value","policy","bucketName","AK","SK","deadline","Math","round","Date","getTime","scope","submitMSG","length","showModal","content","showCancel","pointer","Pointer","poiID","set","join","partIndex","save","complete","catch","err","chooseImg","THAT","chooseImage","count","sizeType","sourceType","tempFilePaths","filePath","qiniuUploader","upload","fileUrl","error","region","domain","key","randomWord","uptoken","fail","deleteImg","splice","deleteTag","chooseLocation","randomFlag","min","max","str","range","arr","random","i","pos"],"mappings":"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","file":"pages/Content/Add/Add.js","sourcesContent":["import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=c489d974&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=c489d974&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c489d974\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"C:\\\\Users\\\\xch752\\\\Downloads\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('c489d974', component.options)\n    } else {\n      api.reload('c489d974', component.options)\n    }\n    module.hot.accept(\"./Add.vue?vue&type=template&id=c489d974&scoped=true&\", function () {\n      api.rerender('c489d974', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Documents/HBuilderProjects/weibo-uniapp/pages/Content/Add/Add.vue\"\nexport default component.exports","export * from \"-!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Add.vue?vue&type=template&id=c489d974&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.tagAddShow = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.tagAddShow = false\n    }\n  }\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Add.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Bmob from \"hydrogen-js-sdk\"\nimport {genUpToken} from '../../../util/qiniuToken.js'\nimport qiniuUploader from '../../../util/qiniuUploader.js'\nimport uniNavBar from \"@/components/uni-nav-bar/uni-nav-bar.vue\" \nimport hFormAlert from '@/components/h-form-alert/h-form-alert.vue';\nexport default{\n\tcomponents: {uniNavBar,hFormAlert},\n\tdata(){\n\t\treturn{\n\t\t\t// 用户ID\n\t\t\tobjectId:'',\n\t\t\t// 七牛token\n\t\t\ttoken:'',\n\t\t\t// 内容\n\t\t\tbodyValue:'',//body\n\t\t\t// 图片\n\t\t\timgList:[],\n\t\t\t// 图片链接\n\t\t\timgListUrl:[],\n\t\t\t// 地理位置\n\t\t\tgeolocation: {},\n\t\t\t// 视频\n\t\t\tvideoSrc:'',\n\t\t\t// 视频链接\n\t\t\tvideoSrcUrl:'',\n\t\t\t// 标签\n\t\t\ttag:[],\n\t\t\t// tagAdd弹窗\n\t\t\ttagAddShow: false,\n\t\t\t// 分区\n\t\t\tpartArray: [],\n\t\t\tindex: 0\n\t\t}\n\t},\n\tonLoad:function(){\n\t\tthis.loadUserData()\n\t\tthis.initQiniu()\n\t\tthis.initPartArray()\n\t},\n\tmethods:{\n\t\tloadUserData(){//获取用户信息\n\t\t\ttry {\n\t\t\t\tthis.objectId = uni.getStorageSync('bmob').objectId\n\t\t\t\tif (!this.objectId) {\n\t\t\t\t\tuni.reLaunch({\n\t\t\t\t\t\turl:'../../Login/Login',\n\t\t\t\t\t\tsuccess:()=>{\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '登录过期',\n\t\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t// error\n\t\t\t\tconsole.log(e)\n\t\t\t\tuni.reLaunch({\n\t\t\t\t\turl:'../../Login/Login',\n\t\t\t\t\tsuccess:()=>{\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '登录过期',\n\t\t\t\t\t\t\tduration: 2000,\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t// 返回\n\t\tnavBack(){\n\t\t\tuni.navigateBack({\n\t\t\t\tdelta: 1\n\t\t\t})\n\t\t},\n\t\t// 获取分区信息\n\t\tinitPartArray(){\n\t\t\tconst query = Bmob.Query(\"Parts\");\n\t\t\tquery.find().then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tthis.partArray = res\n\t\t\t})\n\t\t},\n\t\t// 新增标签\n\t\taddTag(res){\n\t\t\tconsole.log(res)\n\t\t\tif(res.tagName !== ''){\n\t\t\t\tthis.tag.push(res.tagName)\n\t\t\t\tthis.tagAddShow = false\n\t\t\t}\n\t\t},\n\t\t// picker\n\t\tbindPickerChange(e) {\n\t\t\tthis.index = e.target.value\n\t\t},\n\t\t// 七牛token初始化\n\t\tinitQiniu(){\n\t\t\tvar token;\n\t\t\tvar policy = {};\n\t\t\tvar bucketName = 'xch752'\n\t\t\tvar AK ='T0c0qxTfHE07tX8QdKxtSaBAvaj6J5b_-HlQYTgf'\n\t\t\tvar SK = 'bT-PoAdQusOcadeX3ELoFPRGDKJHr8d8kYBmBQ5X'\n\t\t\tvar deadline = Math.round(new Date().getTime()/1000) + 3600\n\t\t\tpolicy.scope = bucketName\n\t\t\tpolicy.deadline = deadline\n\t\t\ttoken=genUpToken(AK,SK,policy)\n\t\t\tthis.token=token;\n\t\t},\n\t\t// 发布\n\t\tsubmitMSG(){\n\t\t\tif((!this.bodyValue)&&(this.imgList.length==0)){\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tcontent:'发送内容不能为空',\n\t\t\t\t\tshowCancel:false\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\t// 创建用户对象\n\t\t\t\tconst pointer = Bmob.Pointer('_User')\n\t\t\t\tconst poiID = pointer.set(this.objectId)\n\t\t\t\tconst query = Bmob.Query('MicroBlog')\n\t\t\t\tquery.set(\"imgList\",this.imgListUrl.join())\n\t\t\t\tquery.set(\"content\",this.bodyValue)\n\t\t\t\tquery.set(\"creator\",poiID)\n\t\t\t\tquery.set(\"Geolocation\",this.geolocation)\n\t\t\t\tquery.set(\"tag\",this.tag.join())\n\t\t\t\tquery.set(\"part\",this.partArray[this.index].partIndex)\n\t\t\t\tquery.save().then(res => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitle:'提示',\n\t\t\t\t\t\tcontent:'发布成功',\n\t\t\t\t\t\tshowCancel:false,\n\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\tuni.navigateBack({\n\t\t\t\t\t\t\t\tdelta: 1\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t// 选择图片\n\t\tchooseImg(){\n\t\t\tvar THAT = this;\n\t\t\tuni.chooseImage({\n\t\t\t\tcount:1,\n\t\t\t\tsizeType:['original','compressed'],//原图&压缩\n\t\t\t\tsourceType:['album','camera'],//相册&相机\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif(THAT.imgList.length<9){\n\t\t\t\t\t\tTHAT.imgList.push(res.tempFilePaths[0]);\n\t\t\t\t\t\tvar filePath = res.tempFilePaths[0]\n\t\t\t\t\t\tqiniuUploader.upload(filePath, (res) => {\n\t\t\t\t\t\t\tTHAT.imgListUrl.push(res.fileUrl);\n\t\t\t\t\t\t\tconsole.log('file url is: ' + res.fileUrl);\n\t\t\t\t\t\t}, (error) => {\n\t\t\t\t\t\t\tconsole.log('error: ' + error);\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t  region: 'SCN',\n\t\t\t\t\t\t  domain: 'http://static.xch752.com', // // bucket 域名，下载资源时用到。如果设置，会在 success callback 的 res 参数加上可以直接使用的 ImageURL 字段。否则需要自己拼接\n\t\t\t\t\t\t  key: `MicroBlog/${THAT.objectId}/${THAT.randomWord(true,20,20)}`, // [非必须]自定义文件 key。如果不设置，默认为使用微信小程序 API 的临时文件名\n\t\t\t\t\t\t  // 以下方法三选一即可，优先级为：uptoken > uptokenURL > uptokenFunc\n\t\t\t\t\t\t  uptoken: THAT.token, // 由其他程序生成七牛 uptoken\n\t\t\t\t\t\t}, (res) => {\n\t\t\t\t\t\t\t// console.log(res);\n\t\t\t\t\t\t\t// if(res.progress!==100){\n\t\t\t\t\t\t\t// \tuni.showToast({\n\t\t\t\t\t\t\t// \t\ttitle:`上传中，已上传${res.progress}`,\n\t\t\t\t\t\t\t// \t\ticon:'loading'\n\t\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t\t// }else if(res.progress===100){\n\t\t\t\t\t\t\t// \tuni.showToast({\n\t\t\t\t\t\t\t// \t\ttitle:`上传完成`,\n\t\t\t\t\t\t\t// \t\ticon:'success'\n\t\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// console.log('上传进度', res.progress)\n\t\t\t\t\t\t\t// console.log('已经上传的数据长度', res.totalBytesSent)\n\t\t\t\t\t\t\t// console.log('预期需要上传的数据总长度', res.totalBytesExpectedToSend)\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t  // 取消上传\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t  // `before` 上传前执行的操作\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t  // `complete` 上传接受后执行的操作(无论成功还是失败都执行)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(THAT.imgList)\n\t\t\t\t},\n\t\t\t\tfail: (err) => {\n\t\t\t\t\tconsole.log(err)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 删除图片\n\t\tdeleteImg(index){\n\t\t\tthis.imgList.splice(index,1)\n\t\t\tthis.imgListUrl.splice(index,1)\n\t\t},\n\t\t// 删除TAG\n\t\tdeleteTag(index){\n\t\t\tthis.tag.splice(index,1)\n\t\t},\n\t\t// 选择位置\n\t\tchooseLocation () {\n\t\t\tuni.chooseLocation({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.geolocation = res\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 随机KEY\n\t\trandomWord(randomFlag, min, max){\n\t\t\tvar str = \"\",\n\t\t\t\trange = min,\n\t\t\t\tarr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\n\t\t\n\t\t\t// 随机产生\n\t\t\tif(randomFlag){\n\t\t\t\trange = Math.round(Math.random() * (max-min)) + min;\n\t\t\t}\n\t\t\tfor(var i=0; i<range; i++){\n\t\t\t\tvar pos = Math.round(Math.random() * (arr.length-1));\n\t\t\t\tstr += arr[pos];\n\t\t\t}\n\t\t\treturn str;\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Add.vue?vue&type=style&index=0&id=c489d974&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Downloads/HBuilderX.2.2.2.20190816.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Add.vue?vue&type=style&index=0&id=c489d974&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}